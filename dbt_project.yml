name: borsa

profile: borsa

config-version: 2

model-paths: ["dbt/models"]
seed-paths: ["dbt/seeds"]
test-paths: ["dbt/tests"]
analysis-paths: ["dbt/analysis"]
macro-paths: ["dbt/macros"]
snapshot-paths: ["dbt/snapshots"]
docs-paths: ["dbt/docs"]
asset-paths: ["dbt/assets"]

packages-install-path: "dbt/packages"

clean-targets: ["dbt/target"]

vars:
  smas: [0, 5, 10, 20, 40]
  bars_ago: [1, 2, 3, 4, 5]
  max_buy_value: 10000
  max_buys_per_day: 3
  trailstop: -0.005
  target_profit: 0.025
  sell_conditions: "open_profit_perc < -0.005 or ts = market_close_ts"
  strategies: [
    {
      id: "test1",
      buy: "(sma0 > sma5)",
    },
    {
      id: "test2",
      buy: "(sma0 > sma5 and sma5 > sma10)",
    },
    {
      id: "test3",
      buy: "(sma0 > sma5 and sma5 > sma10 and sma10 > sma20 and sma20cntup1)",
    }
  ]

# Dev is for backtesting where tables are faster
# Prod is for trading where views are faster
models:
  borsa:
    intermediate:
      +materialized: "{{ 'table' if target.name == 'dev' else 'view' }}"
    reports:
      +materialized: "{{ 'table' if target.name == 'dev' else 'view' }}"